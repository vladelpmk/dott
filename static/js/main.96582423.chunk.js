(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/logo-black.4e028687.svg"},32:function(e,t,a){e.exports=a(67)},41:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(12),l=a.n(o),i=a(10),s=(a(41),function(){return c.a.createElement("footer",{className:"mt-auto text-center"},c.a.createElement("div",{className:"inner"},c.a.createElement("h6",null,"Made with ",c.a.createElement("span",{role:"img","aria-label":"Heart"},"\u2764"),c.a.createElement("span",null," by ",c.a.createElement("a",{href:"https://www.linkedin.com/in/vladimir-gjorgievski-a9a0338a",rel:"noopener noreferrer",target:"_blank",title:"Vladimir Gjorgievski"},"Vladimir")))))}),u=a(2),m=a(3),d=a(4),p=a(7),E=a(5),h=a(6),b=a(18),v=a(28),g=a.n(v),O=a(19),f=a.n(O),S=function(e){return function(t){return function(a){return"@api.CALL"===a.type&&(g()(a.payload.url).then(function(t){return e.dispatch({type:a.payload.success,data:Object(u.a)({},f.a.camelizeKeys(t.data),{page:a.payload.page})})}).catch(function(t){return e.dispatch({type:a.payload.error,data:f.a.camelizeKeys(t)})}),e.dispatch({type:a.payload.request,data:a})),t(a)}}},y="https://openlibrary.org/",j=a(29),k=a.n(j);!function(e){e.GET_BOOKS="@@books/GET",e.GET_BOOKS_SUCCESS="@@books/GET_SUCCESS",e.GET_BOOKS_PAGE="@@books/GET_PAGE",e.GET_BOOKS_PAGE_SUCCESS="@@books/GET_PAGE_SUCCESS",e.GET_BOOKS_ERROR="@@books/GET_ERROR"}(n||(n={}));var _={docs:[],query:"",page:0,numFound:0,start:0,loading:!1,error:void 0,timeAt:!1,initial:!0},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.GET_BOOKS:return Object(u.a)({},e,{query:t.query,loading:!0,initial:!1});case n.GET_BOOKS_SUCCESS:return Object(u.a)({},e,t.data,{timeAt:k()(),loading:!1});case n.GET_BOOKS_PAGE_SUCCESS:return Object(u.a)({},e,{docs:e.docs.concat(t.data.docs),page:t.data.page});case n.GET_BOOKS_ERROR:return Object(u.a)({},e,{error:t.error});default:return e}},C=(a(62),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).typingTimeOut=void 0,a.state={query:""},a.handleAPI=function(e){e&&e.preventDefault(),a.props.getBooksByTitle(a.state.query),clearTimeout(a.typingTimeOut)},a.handleChange=function(e){clearTimeout(a.typingTimeOut),a.setState(Object(u.a)({},a.state,{query:e.target.value})),a.typingTimeOut=setTimeout(a.handleAPI,1e3)},a.getLastSearchTimeStamp=function(){var e=a.props.books;return e.timeAt?c.a.createElement("small",{className:"ml-2"},c.a.createElement("span",{role:"img","aria-label":"stopwatch"},"\u23f1\ufe0f")," last search @ ",c.a.createElement("b",null,e.timeAt.local().format("YYYY-MM-DD HH:mm:ss"))," page loaded: ",e.page):c.a.createElement(c.a.Fragment,null)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{className:"search mt-2 mt-md-0 ml-4",onSubmit:this.handleAPI},c.a.createElement("input",{className:"form-control mr-sm-2",type:"text",placeholder:"Search for a book","aria-label":"Search",value:this.state.query,onChange:this.handleChange})),this.getLastSearchTimeStamp())}}]),t}(c.a.Component)),x=Object(i.b)(function(e){return{books:e.books}},function(e){return{getBooksByTitle:function(t){return e(function(e){return Object(b.action)("@api.CALL",{url:encodeURI("".concat(y,"search.json?q=").concat(e)),page:1,query:e,request:n.GET_BOOKS,success:n.GET_BOOKS_SUCCESS,error:n.GET_BOOKS_ERROR})}(t))}}})(C),G=(a(63),a(30)),w=a.n(G),N=function(e){var t=e.children;return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",{className:"masthead mb-auto"},c.a.createElement("div",{className:"inner"},c.a.createElement("img",{src:w.a,alt:"logo"}),c.a.createElement(x,null))),c.a.createElement("main",{className:"main inner cover"},t),c.a.createElement(s,null))},B=(a(64),a(65),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).getImage=function(){var e=a.props.book,t="isbn",n=e.isbn&&e.isbn[0];return c.a.createElement("picture",null,c.a.createElement("source",{media:"(min-width: 650px)",srcSet:"https://covers.openlibrary.org/b/".concat(t,"/").concat(n,"-L.jpg")}),c.a.createElement("source",{media:"(min-width: 465px)",srcSet:"https://covers.openlibrary.org/b/".concat(t,"/").concat(n,"-M.jpg")}),c.a.createElement("source",{media:"(min-width: 265px)",srcSet:"https://covers.openlibrary.org/b/".concat(t,"/").concat(n,"-S.jpg")}),c.a.createElement("img",{src:"https://covers.openlibrary.org/b/".concat(t,"/").concat(n,"-S.jpg"),alt:e.title}))},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.book,a=e.active;return e.lazyLoad?c.a.createElement("div",{className:"carousel-item ".concat(a&&"active")},c.a.createElement("div",{className:"container"},this.getImage(),c.a.createElement("div",{className:"infos"},c.a.createElement("h1",null,t.title),c.a.createElement("p",null,t.authorName&&"by ".concat(t.authorName.join(", ")))))):c.a.createElement(c.a.Fragment,null)}}]),t}(c.a.Component)),I=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.activeIndex;return a+1>e.lastIndex?c.a.createElement(c.a.Fragment,null):c.a.createElement("a",{className:"carousel-control-next",href:"#next",onClick:t(a+1),role:"button","data-slide":"next"},c.a.createElement("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),c.a.createElement("span",{className:"sr-only"},"Next"))}}]),t}(c.a.Component),A=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.activeIndex;return 0===a?c.a.createElement(c.a.Fragment,null):c.a.createElement("a",{className:"carousel-control-prev",href:"#prev",onClick:t(a-1),role:"button","data-slide":"prev"},c.a.createElement("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),c.a.createElement("span",{className:"sr-only"},"Previous"))}}]),t}(c.a.Component),R=function(e){var t=e.message;return c.a.createElement("div",{className:"text-center"},c.a.createElement("span",null,"Something went wrong"),c.a.createElement("span",null,"more info: ",t))},K=function(){return c.a.createElement("div",{className:"text-center"},c.a.createElement("div",{className:"spinner-border",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")))},L=function(){return c.a.createElement("div",{className:"text-center"},c.a.createElement("span",null,"We found nothing ",c.a.createElement("span",{role:"img","aria-label":"eyes"},"\ud83d\udc40")))},q=function(){return c.a.createElement("div",{className:"text-center"},c.a.createElement("span",null,"Go on, type something ",c.a.createElement("span",{role:"img","aria-label":"piano"},"\ud83c\udfb9")))},P=3,U=3,F=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(E.a)(t).call(this,e))).interval=void 0,a.state={activeIndex:0},a.nextSlide=function(){var e=a.props.books,t=a.state.activeIndex,n=t+1;n>e.docs.length-1&&(n=0),n!==t&&a.handleSlide(n)()},a.handleSlide=function(e){return function(){var t=a.props,n=t.books,r=t.getBooksByTitlePage;e>n.docs.length-U&&r(n.query,n.page+1),a.setState(Object(u.a)({},a.state,{activeIndex:e}))}},a.isLazyLoad=function(e){var t=a.state.activeIndex;return e+U>=t&&e-P<=t},a.interval=setInterval(a.nextSlide,1e4),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.books.loading&&!e.books.loading&&this.setState(Object(u.a)({},this.state,{activeIndex:0}))}},{key:"render",value:function(){var e=this,t=this.props.books,a=this.state.activeIndex;return t.initial?c.a.createElement(q,null):t.loading?c.a.createElement(K,null):t.error?c.a.createElement(R,{message:t.error}):0===t.docs.length?c.a.createElement(L,null):c.a.createElement("div",{className:"carousel slide mt-4 mb-4","data-ride":"carousel"},c.a.createElement("div",{className:"carousel-inner"},t.docs.map(function(t,n){return c.a.createElement(B,{book:t,key:n.toString(),active:a===n,lazyLoad:e.isLazyLoad(n)})})),c.a.createElement(A,{onClick:this.handleSlide,activeIndex:a}),c.a.createElement(I,{onClick:this.handleSlide,activeIndex:a,lastIndex:t.numFound-1}))}}]),t}(c.a.Component),z=Object(i.b)(function(e){return{books:e.books}},function(e){return{getBooksByTitlePage:function(t,a){return e(function(e,t){return Object(b.action)("@api.CALL",{url:encodeURI("".concat(y,"search.json?q=").concat(e)),page:t,query:e,request:n.GET_BOOKS_PAGE,success:n.GET_BOOKS_PAGE_SUCCESS,error:n.GET_BOOKS_ERROR})}(t,a))}}})(F),D=function(e){var t=e.store;return c.a.createElement(i.a,{store:t},c.a.createElement(N,null,c.a.createElement(z,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=a(8),W=a(31),Y=function(){return Object(M.combineReducers)({books:T})};a(66);var H=function(e){var t=Object(W.composeWithDevTools)({});return Object(M.createStore)(Y(),e,t(Object(M.applyMiddleware)(S)))}(window.initialReduxState);l.a.render(c.a.createElement(D,{store:H}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.96582423.chunk.js.map